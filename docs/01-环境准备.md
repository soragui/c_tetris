# ç¬¬ 1 è¯¾ï¼šç¯å¢ƒå‡†å¤‡ ğŸ› ï¸

## 1.1 æœ¬è¯¾ç›®æ ‡

å­¦ä¹ å¦‚ä½•æ­å»º C è¯­è¨€å¼€å‘ç¯å¢ƒï¼Œä¸ºåç»­å¼€å‘ä¿„ç½—æ–¯æ–¹å—æ¸¸æˆåšå¥½å‡†å¤‡ã€‚

---

## 1.2 ä¸ºä»€ä¹ˆéœ€è¦è¿™äº›å·¥å…·ï¼Ÿ

### ç¼–è¯‘å™¨ï¼ˆGCCï¼‰
C è¯­è¨€æ˜¯**ç¼–è¯‘å‹è¯­è¨€**ï¼Œæºä»£ç éœ€è¦è½¬æ¢æˆæœºå™¨ç æ‰èƒ½è¿è¡Œã€‚GCCï¼ˆGNU Compiler Collectionï¼‰æ˜¯æœ€å¸¸ç”¨çš„ C è¯­è¨€ç¼–è¯‘å™¨ã€‚

```
æºä»£ç  (.c) â†’ [ç¼–è¯‘å™¨] â†’ å¯æ‰§è¡Œæ–‡ä»¶
     â†“                        â†“
  äººç±»å¯è¯»                  æœºå™¨å¯è¯»
```

### Make å·¥å…·
å½“é¡¹ç›®æœ‰å¤šä¸ªæºæ–‡ä»¶æ—¶ï¼Œæ¯æ¬¡éƒ½ç”¨é•¿é•¿çš„å‘½ä»¤ç¼–è¯‘å¾ˆéº»çƒ¦ã€‚Make å·¥å…·é€šè¿‡ `Makefile` è‡ªåŠ¨åŒ–ç¼–è¯‘è¿‡ç¨‹ã€‚

### ncurses åº“
ncurses æ˜¯ä¸€ä¸ªç»ˆç«¯å›¾å½¢åº“ï¼Œè®©æˆ‘ä»¬èƒ½åœ¨å‘½ä»¤è¡Œä¸­ç»˜åˆ¶è¾¹æ¡†ã€é¢œè‰²ã€å­—ç¬¦å›¾å½¢ã€‚ä¿„ç½—æ–¯æ–¹å—çš„ç•Œé¢å°±é å®ƒã€‚

---

## 1.3 å®‰è£…æ­¥éª¤

### Ubuntu/Debian ç³»ç»Ÿ

```bash
# æ›´æ–°è½¯ä»¶åŒ…åˆ—è¡¨
sudo apt update

# å®‰è£…ç¼–è¯‘å™¨å’Œå¿…è¦å·¥å…·
sudo apt install build-essential gcc make gdb

# å®‰è£… ncurses å¼€å‘åº“
sudo apt install libncurses5-dev
```

**å‘½ä»¤è§£é‡Šï¼š**
- `sudo` - ä»¥ç®¡ç†å‘˜æƒé™è¿è¡Œ
- `apt` - Ubuntu çš„åŒ…ç®¡ç†å™¨
- `build-essential` - åŒ…å« gccã€make ç­‰åŸºç¡€å¼€å‘å·¥å…·
- `gdb` - GNU è°ƒè¯•å™¨ï¼Œç”¨äºè°ƒè¯•ç¨‹åº
- `libncurses5-dev` - ncurses åº“çš„å¼€å‘æ–‡ä»¶ï¼ˆå¤´æ–‡ä»¶å’Œåº“æ–‡ä»¶ï¼‰

### Fedora/CentOS/RHEL ç³»ç»Ÿ

```bash
# å®‰è£…å¼€å‘å·¥å…·ç»„
sudo dnf groupinstall "Development Tools"

# å®‰è£… ncurses å¼€å‘åº“
sudo dnf install ncurses-devel
```

### macOS ç³»ç»Ÿ

```bash
# å®‰è£… Xcode å‘½ä»¤è¡Œå·¥å…·
xcode-select --install

# ä½¿ç”¨ Homebrew å®‰è£… ncurses
brew install ncurses
```

---

## 1.4 éªŒè¯å®‰è£…

å®‰è£…å®Œæˆåï¼ŒéªŒè¯å·¥å…·æ˜¯å¦æ­£ç¡®å®‰è£…ï¼š

```bash
# æ£€æŸ¥ GCC ç‰ˆæœ¬
gcc --version
# è¾“å‡ºç¤ºä¾‹ï¼šgcc (Ubuntu 11.4.0-1ubuntu1~22.04) 11.4.0

# æ£€æŸ¥ Make ç‰ˆæœ¬
make --version
# è¾“å‡ºç¤ºä¾‹ï¼šGNU Make 4.3

# æ£€æŸ¥ ncurses æ˜¯å¦å¯ç”¨
pkg-config --libs ncurses
# è¾“å‡ºï¼š-lncurses
```

å¦‚æœçœ‹åˆ°ç‰ˆæœ¬å·è¾“å‡ºï¼Œè¯´æ˜å®‰è£…æˆåŠŸï¼âœ…

---

## 1.5 è·å–é¡¹ç›®ä»£ç 

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd ~/Work/open_learn/c_proj/tetris

# æŸ¥çœ‹é¡¹ç›®ç»“æ„
ls -la
```

**é¢„æœŸè¾“å‡ºï¼š**
```
total 68
drwxr-xr-x  src/          # æºä»£ç ç›®å½•
drwxr-xr-x  docs/         # æ•™ç¨‹æ–‡æ¡£
drwxr-xr-x  data/         # æ¸¸æˆæ•°æ®ï¼ˆæœ€é«˜åˆ†ï¼‰
-rw-r--r--  Makefile      # æ„å»ºé…ç½®
-rw-r--r--  README.md     # é¡¹ç›®è¯´æ˜
```

---

## 1.6 ç¼–è¯‘å’Œè¿è¡Œ

### ç¼–è¯‘é¡¹ç›®

```bash
make
```

**ç¼–è¯‘è¿‡ç¨‹è¯¦è§£ï¼š**

```bash
# Makefile ä¼šæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼ˆä½ ä¸éœ€è¦æ‰‹åŠ¨è¾“å…¥ï¼‰

# 1. åˆ›å»º obj ç›®å½•
mkdir -p obj

# 2. ç¼–è¯‘æ¯ä¸ª .c æ–‡ä»¶ä¸º .o æ–‡ä»¶
gcc -Wall -Wextra -std=c99 -Isrc -O2 -c src/board.c -o obj/board.o
gcc -Wall -Wextra -std=c99 -Isrc -O2 -c src/game.c -o obj/game.o
gcc -Wall -Wextra -std=c99 -Isrc -O2 -c src/input.c -o obj/input.o
gcc -Wall -Wextra -std=c99 -Isrc -O2 -c src/main.c -o obj/main.o
gcc -Wall -Wextra -std=c99 -Isrc -O2 -c src/render.c -o obj/render.o
gcc -Wall -Wextra -std=c99 -Isrc -O2 -c src/score.c -o obj/score.o
gcc -Wall -Wextra -std=c99 -Isrc -O2 -c src/tetromino.c -o obj/tetromino.o

# 3. é“¾æ¥æ‰€æœ‰ .o æ–‡ä»¶ï¼Œç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶
gcc obj/*.o -o tetris -lncurses
```

**ç¼–è¯‘é€‰é¡¹è§£é‡Šï¼š**
| é€‰é¡¹ | å«ä¹‰ | ä½œç”¨ |
|------|------|------|
| `-Wall` | Warning All | æ˜¾ç¤ºæ‰€æœ‰è­¦å‘Š |
| `-Wextra` | Warning Extra | æ˜¾ç¤ºé¢å¤–è­¦å‘Š |
| `-std=c99` | Standard C99 | ä½¿ç”¨ C99 æ ‡å‡† |
| `-Isrc` | Include src | åœ¨ src ç›®å½•æŸ¥æ‰¾å¤´æ–‡ä»¶ |
| `-O2` | Optimize 2 | äºŒçº§ä¼˜åŒ–ï¼Œæé«˜è¿è¡Œé€Ÿåº¦ |
| `-c` | Compile only | åªç¼–è¯‘ï¼Œä¸é“¾æ¥ |
| `-lncurses` | Library ncurses | é“¾æ¥ ncurses åº“ |

### è¿è¡Œæ¸¸æˆ

```bash
make run
# ç­‰ä»·äº ./tetris
```

### æ¸…ç†ç¼–è¯‘äº§ç‰©

```bash
make clean
# åˆ é™¤ obj/ ç›®å½•å’Œ tetris å¯æ‰§è¡Œæ–‡ä»¶
```

---

## 1.7 å¸¸è§é—®é¢˜è§£å†³

### é—®é¢˜ 1ï¼š`gcc: command not found`

**åŸå› ï¼š** æœªå®‰è£… GCC ç¼–è¯‘å™¨

**è§£å†³ï¼š**
```bash
sudo apt install build-essential  # Ubuntu
sudo dnf groupinstall "Development Tools"  # Fedora
```

### é—®é¢˜ 2ï¼š`ncurses.h: No such file or directory`

**åŸå› ï¼š** æœªå®‰è£… ncurses å¼€å‘åº“

**è§£å†³ï¼š**
```bash
sudo apt install libncurses5-dev  # Ubuntu
sudo dnf install ncurses-devel  # Fedora
```

### é—®é¢˜ 3ï¼š`make: command not found`

**åŸå› ï¼š** æœªå®‰è£… Make å·¥å…·

**è§£å†³ï¼š**
```bash
sudo apt install make  # Ubuntu
sudo dnf install make  # Fedora
```

---

## 1.8 çŸ¥è¯†æ‰©å±•

### ä¸ºä»€ä¹ˆä½¿ç”¨ C è¯­è¨€ï¼Ÿ

1. **æ€§èƒ½é«˜** - ç›´æ¥ç¼–è¯‘ä¸ºæœºå™¨ç ï¼Œè¿è¡Œé€Ÿåº¦å¿«
2. **åº•å±‚æ§åˆ¶** - å¯ä»¥ç²¾ç¡®æ§åˆ¶å†…å­˜å’Œç¡¬ä»¶
3. **è·¨å¹³å°** - å‡ ä¹å¯ä»¥åœ¨ä»»ä½•ç³»ç»Ÿä¸Šç¼–è¯‘è¿è¡Œ
4. **å­¦ä¹ ä»·å€¼** - ç†è§£è®¡ç®—æœºå·¥ä½œåŸç†

### ç»ˆç«¯å›¾å½¢åº“å¯¹æ¯”

| åº“ | ç‰¹ç‚¹ | é€‚ç”¨åœºæ™¯ |
|---|------|---------|
| **ncurses** | åŠŸèƒ½å¼ºå¤§ï¼Œè·¨å¹³å° | å¤æ‚ç»ˆç«¯åº”ç”¨ |
| **termbox** | è½»é‡çº§ï¼Œç®€å• | ç®€å•ç»ˆç«¯ UI |
| **åŸç”Ÿè½¬ä¹‰åºåˆ—** | æ— éœ€åº“ï¼Œç›´æ¥æ§åˆ¶ | ç®€å•åŠ¨ç”»ã€é¢œè‰² |

æœ¬é¡¹ç›®é€‰æ‹© ncursesï¼Œå› ä¸ºï¼š
- âœ… åŠŸèƒ½å®Œæ•´ï¼ˆé¢œè‰²ã€é”®ç›˜ã€çª—å£ï¼‰
- âœ… è·¨å¹³å°ï¼ˆLinuxã€macOSã€WSLï¼‰
- âœ… å­¦ä¹ ä»·å€¼é«˜ï¼ˆä¸šç•Œæ ‡å‡†ï¼‰

---

## âœ… æœ¬è¯¾æ£€æŸ¥æ¸…å•

- [ ] å·²å®‰è£… GCC ç¼–è¯‘å™¨ï¼ˆ`gcc --version`ï¼‰
- [ ] å·²å®‰è£… Make å·¥å…·ï¼ˆ`make --version`ï¼‰
- [ ] å·²å®‰è£… ncurses åº“ï¼ˆ`pkg-config --libs ncurses`ï¼‰
- [ ] èƒ½æˆåŠŸç¼–è¯‘é¡¹ç›®ï¼ˆ`make`ï¼‰
- [ ] èƒ½è¿è¡Œæ¸¸æˆï¼ˆ`make run`ï¼‰
- [ ] ç†è§£ç¼–è¯‘é€‰é¡¹çš„å«ä¹‰

---

## ğŸ“ å°ä½œä¸š

1. å°è¯•ä¿®æ”¹ `Makefile` ä¸­çš„ä¼˜åŒ–çº§åˆ«ï¼ˆ`-O2` æ”¹ä¸º `-O0`ï¼‰ï¼Œé‡æ–°ç¼–è¯‘ï¼Œè§‚å¯Ÿæœ‰ä»€ä¹ˆä¸åŒ

2. è¿è¡Œ `gcc --help`ï¼ŒæŸ¥æ‰¾ `-g` é€‰é¡¹çš„ä½œç”¨ï¼ˆæç¤ºï¼šè°ƒè¯•ä¿¡æ¯ï¼‰

3. æŸ¥çœ‹ç³»ç»Ÿä¸­çš„ ncurses å¤´æ–‡ä»¶ä½ç½®ï¼š
   ```bash
   find /usr/include -name "ncurses.h"
   ```

---

ä¸‹ä¸€è¯¾ï¼š[é¡¹ç›®ç»“æ„](02-é¡¹ç›®ç»“æ„.md)
