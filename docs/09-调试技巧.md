# ç¬¬ 9 è¯¾ï¼šè°ƒè¯•æŠ€å·§ ğŸ›

## 9.1 ç¼–è¯‘è­¦å‘Š

ç¼–è¯‘æ—¶å¼€å¯è­¦å‘Šï¼Œå¸®åŠ©å‘ç°é—®é¢˜ï¼š

```bash
# Makefile ä¸­
CFLAGS = -Wall -Wextra -std=c99
```

**å¸¸è§è­¦å‘Šï¼š**
```
warning: unused variable 'x'
â†’ åˆ é™¤æœªä½¿ç”¨çš„å˜é‡

warning: implicit declaration of function
â†’ æ·»åŠ å‡½æ•°å£°æ˜æˆ–åŒ…å«å¤´æ–‡ä»¶

warning: comparison between signed and unsigned
â†’ ç»Ÿä¸€æ•°æ®ç±»å‹
```

## 9.2 printf è°ƒè¯•

æœ€ç®€å•çš„è°ƒè¯•æ–¹æ³•ï¼š

```c
void game_update(Game* game) {
    printf("DEBUG: æ–¹å—ä½ç½® (%d, %d)\n", 
           game->current.x, game->current.y);
    
    // ... ä»£ç 
}
```

**è°ƒè¯•æŠ€å·§ï¼š**
```c
// 1. æ‰“å°å…³é”®å˜é‡
printf("score=%d level=%d\n", game->score, game->level);

// 2. æ ‡è®°ä»£ç æ‰§è¡Œä½ç½®
printf("=== è¿›å…¥å‡½æ•° ===\n");

// 3. æ¡ä»¶æ‰“å°
if (game->game_over) {
    printf("æ¸¸æˆç»“æŸï¼åˆ†æ•°ï¼š%d\n", game->score);
}
```

## 9.3 å¸¸è§é—®é¢˜è§£å†³

### é—®é¢˜ 1ï¼šæ–¹å—æ˜¾ç¤ºä¹±ç 

**åŸå› ï¼š** ä½¿ç”¨äº†ä¸­æ–‡å­—ç¬¦

**è§£å†³ï¼š** ä½¿ç”¨ ncurses æ ‡å‡†å­—ç¬¦
```c
// âŒ é”™è¯¯
mvaddstr(y, x, "â–ˆâ–ˆ");

// âœ… æ­£ç¡®
mvaddch(y, x * 2, ACS_CKBOARD);
mvaddch(y, x * 2 + 1, ACS_CKBOARD);
```

### é—®é¢˜ 2ï¼šæ–¹å—ä¸‹è½å¤ªå¿«

**åŸå› ï¼š** æ—¶é—´é—´éš”è®¾ç½®å¤ªå°

**è§£å†³ï¼š** è°ƒæ•´ drop_interval
```c
game->drop_interval = 3000;  // 3 ç§’/æ ¼
```

### é—®é¢˜ 3ï¼šç¢°æ’æ£€æµ‹å¤±æ•ˆ

**åŸå› ï¼š** åæ ‡è®¡ç®—é”™è¯¯

**è°ƒè¯•ï¼š**
```c
printf("æ£€æŸ¥ç¢°æ’ï¼šæ–¹å— (%d,%d) æ£‹ç›˜ [%d][%d]=%d\n",
       t->x, t->y, y, x, board[y][x]);
```

### é—®é¢˜ 4ï¼šå†…å­˜æ³„æ¼

**æ£€æŸ¥ï¼š**
```bash
# ä½¿ç”¨ valgrind
valgrind --leak-check=full ./tetris
```

**è¾“å‡ºç¤ºä¾‹ï¼š**
```
==1234== 40 bytes in 1 blocks are definitely lost
â†’ æœ‰å†…å­˜æ³„æ¼ï¼Œéœ€è¦ free()
```

## 9.4 è°ƒè¯•ç‰ˆæœ¬

```makefile
# Makefile
debug: CFLAGS += -g -DDEBUG
debug: clean all
```

```c
// ä»£ç ä¸­
#ifdef DEBUG
    printf("è°ƒè¯•ä¿¡æ¯...\n");
#endif
```

## âœ… æœ¬è¯¾æ£€æŸ¥æ¸…å•

- [ ] ä¼šçœ‹ç¼–è¯‘è­¦å‘Š
- [ ] ä¼šç”¨ printf è°ƒè¯•
- [ ] çŸ¥é“å¸¸è§é—®é¢˜çš„è§£å†³æ–¹æ³•
- [ ] äº†è§£ valgrind å·¥å…·

---

[è¿”å›ç›®å½•](00-ç›®å½•.md)
